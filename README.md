# üìå An√°lise Preditiva de Attrition 
![analise](relatorios/imagens/countplot.png)


PT

## Vis√£o Geral do Projeto

Este projeto tem como objetivo prever attrition de funcion√°rios com base em caracter√≠sticas demogr√°ficas, profissionais e de satisfa√ß√£o no trabalho. Utilizei t√©cnicas de Machine Learning para identificar os principais fatores que influenciam a sa√≠da de colaboradores.

## üîç Contexto

A base de dados cont√©m:

1.470 registros e 31 vari√°veis.

Vari√°veis num√©ricas: idade, dist√¢ncia de casa, renda mensal, tempo de empresa, etc.

Vari√°veis categ√≥ricas: departamento, cargo, estado civil, viagens a trabalho, etc.

Target: Attrition (Sim/N√£o) ‚Üí Dados desbalanceados (apenas 16% de casos "Sim").

## üìä Principais Desafios

Desbalanceamento da classe target:

Testar t√©cnicas como Random OverSampling (ROS) e SMOTE-Tomek, mas os resultados foram piores que o modelo sem balanceamento.

Solu√ß√£o: Usei class_weight='balanced' e scale_pos_weight em modelos baseados em √°rvores.

Pr√©-processamento diferenciado:

OneHotEncoder: Para vari√°veis categ√≥ricas n√£o ordenadas.

OrdinalEncoder: Para vari√°veis ordinais (ex.: Satisfa√ß√£o no trabalho).

Escalonamento adaptado:

MinMaxScaler: Para tarifas (DailyRate, HourlyRate, MonthlyRate).

StandardScaler: Para Idade (distribui√ß√£o pr√≥xima da normal).

PowerTransformer: Para outras vari√°veis num√©ricas.

## ‚öôÔ∏è Modelos Testados
![comparativo](relatorios/imagens/comparativo.png)

Modelo	Ajustes Especiais	Melhor M√©trica (Avg Precision)
LogisticRegression	class_weight='balanced', GridSearch (C, penalty)	0.61
LGBMClassifier	scale_pos_weight=5.2	0.51
XGBClassifier	scale_pos_weight=5.2	0.46
SGDClassifier	-	0.58
SVC	-	0.63
DecisionTree	class_weight='balanced'	0.226

## üìâ Resultados

![matriz_confusao](relatorios/imagens/matriz.png)

Melhor modelo: Regress√£o Log√≠stica com ElasticNet (C=0.1, l1_ratio=0.1).

Average Precision: 0.633

Recall alto (0.73): Identifica bem funcion√°rios propensos a sair.

Precis√£o moderada (0.38): Reflexo do desbalanceamento.

## üîé Insights (Odds Ratio)

Fatores que AUMENTAM o risco de Attrition:

Hora extra = Sim (3.87x mais chance).

Forma√ß√£o T√©cnica (1.88x).

Estado civil solteiro (1.68x).

Fatores que DIMINUEM o risco:

Funcion√°rios que n√£o viajam t√™m 61% menos chance de deixar a empresa

Funcion√°rios com a renda mensal alta tem  36% menos chance de deixar a empresa



## üìå Conclus√£o

A Regress√£o Log√≠stica teve o melhor desempenho, equilibrando recall e precis√£o.

T√©cnicas de balanceamento (ROS, SMOTE-Tomek) n√£o melhoraram os resultados.
    
    Algumas considera√ß√µes a respeito:
    
        ‚Ä¢ Criticidade de outliers: Em problemas como attrition, casos raros (ex: um funcion√°rio de alto desempenho que saiu) podem ser importantes, e SMOTE/ROS podem diluir seu impacto.
        ‚Ä¢ O modelo original (n√£o balanceado) pode ter mantido melhor a capacidade de identificar padr√µes genu√≠nos.

Vari√°veis como hora extra, viagens e estado civil s√£o cr√≠ticas para prever attrition.

A aplica√ß√£o do modelo para a previs√£o de attrition foi feita atrav√©s do Streamlit, tornando o processo mais simples e intuitivo. Al√©m disso, o app permite a visualiza√ß√£o da probabilidade de attrition para cada caso.

['Clique aqui para "An√°lise Preditiva de Attrition" '](https://predictive-attrition-analysis-fbps.streamlit.app/)
![Imagem](relatorios/imagens/streamlit.png)




## üöÄ Pr√≥ximos Passos


Plano de a√ß√£o

Avaliar os motivos que levam os funcion√°rios a fazerem hora extra.

    M√£o de obra insuficiente

    Falta de organiza√ß√£o institucional

    Falta de treinamento

    Necessidade de investimento em tecnologia

Possibilidade de diminuir as viagens de neg√≥cios.

    Como isso afeta a equipe de vendas?

Aten√ß√£o aos funcion√°rios de forma√ß√£o t√©cnica

    Como a renda mensal se compara com o mercado? 

    A√ß√µes voltadas para o clima organizacional 

## Sobre a Base de Dados

Dataset: IBM HR Analytics Employee Attrition & Performance (Link no Kaggle).

Attrition vs. Turnover
Attrition: Sa√≠das volunt√°rias (aposentadorias, demiss√µes volunt√°rias).

Turnover: Todas as sa√≠das (volunt√°rias + demiss√µes).

## Organiza√ß√£o do projeto

```

‚îú‚îÄ‚îÄ dados              <- Arquivos de dados para o projeto.
‚îú‚îÄ‚îÄ modelos            <- Modelos gerados para o projeto.
|
‚îú‚îÄ‚îÄ notebooks          <- Cadernos Jupyter. 
‚îÇ
|   ‚îî‚îÄ‚îÄsrc             <- C√≥digo-fonte para uso neste projeto.
|      ‚îÇ
|      ‚îú‚îÄ‚îÄ __init__.py  <- Torna um m√≥dulo Python
|      ‚îú‚îÄ‚îÄ auxiliares.py<- Fun√ß√µes auxiliares do projeto
|      ‚îú‚îÄ‚îÄ config.py    <- Configura√ß√µes b√°sicas do projeto
|      ‚îú‚îÄ‚îÄ graficos.py  <- Scripts para criar visualiza√ß√µes explorat√≥rias e orientadas a resultados
|      ‚îî‚îÄ‚îÄ modelos.py   <- Fun√ß√µes utilizadas no modelo
|
‚îú‚îÄ‚îÄ referencias        <- Dicion√°rios de dados.
‚îú‚îÄ‚îÄ relatorios         <- Relat√≥rio gerado durante o projeto utilizando a biblioteca [ydata-profiling]
‚îÇ   ‚îî‚îÄ‚îÄ imagens        <- Gr√°ficos e figuras gerados para serem usados em relat√≥rios
‚îú‚îÄ‚îÄ ambiente.yml       <- O arquivo de requisitos para reproduzir o ambiente de an√°lise
‚îú‚îÄ‚îÄ requirements.txt   <- O arquivo para instalar depend√™ncias via pip
‚îú‚îÄ‚îÄ LICENSE            <- Licen√ßa de c√≥digo aberto se uma for escolhida
‚îú‚îÄ‚îÄ README.md          <- README principal para desenvolvedores que usam este projeto.
|
```

## Configura√ß√£o do ambiente

1. Fa√ßa o clone do reposit√≥rio que ser√° criado a partir deste modelo.

    ```bash
    git clone ENDERECO_DO_REPOSITORIO
    ```

2. Crie um ambiente virtual para o seu projeto utilizando o gerenciador de ambientes de sua prefer√™ncia.

    a. Caso esteja utilizando o `conda`, exporte as depend√™ncias do ambiente para o arquivo `ambiente.yml`:

      ```bash
      conda env export > ambiente.yml
      ```

    b. Caso esteja utilizando outro gerenciador de ambientes, exporte as depend√™ncias
    para o arquivo `requirements.txt` ou outro formato de sua prefer√™ncia. Adicione o
    arquivo ao controle de vers√£o, removendo o arquivo `ambiente.yml`.



Para mais informa√ß√µes sobre como usar Git e GitHub, [clique aqui](https://cienciaprogramada.com.br/2021/09/guia-definitivo-git-github/). Sobre ambientes virtuais, [clique aqui](https://cienciaprogramada.com.br/2020/08/ambiente-virtual-projeto-python/).


EN

# üìå Predictive Attrition Analysis

Project Overview
This project aims to predict employee attrition (turnover) in a company based on demographic, professional, and job satisfaction features. Using Machine Learning techniques, we explored different models to identify key factors influencing employee departures.

## üîç Context

The dataset contains 1,470 records with 31 variables, including:

Numerical variables: Age, Distance from Home, Monthly Income, Years at Company, etc.

Categorical variables: Department, Job Role, Marital Status, Business Travel, etc.

Target: Attrition (Yes/No) ‚Üí Imbalanced data (16% "Yes").

## üìä Key Challenges

Class imbalance:

Tested techniques like Random OverSampling (ROS) and SMOTE-Tomek, but results were worse than the unbalanced model.

Used class_weight='balanced' and scale_pos_weight for tree-based models.

Preprocessing:

OneHotEncoder: Non-ordinal categorical variables.

OrdinalEncoder: Ordinal variables (e.g., Job Satisfaction).

Scaling:

MinMaxScaler: Rates (DailyRate, HourlyRate, MonthlyRate).

StandardScaler: Age (near-normal distribution).

PowerTransformer: Other numerical variables (improved normalization).

## ‚öôÔ∏è Tested Models

Model	Special Adjustments	Best Metric (Avg Precision)
LogisticRegression	class_weight='balanced', GridSearch (C, penalty)	0.633
LGBMClassifier	scale_pos_weight=5.2	0.504
XGBClassifier	scale_pos_weight=5.2	0.466
SGDClassifier	-	0.591
SVC	-	0.630
DecisionTree	class_weight='balanced'	0.226

## üìâ Results

Best model: Logistic Regression with ElasticNet (C=0.1, l1_ratio=0.1).

Average Precision: 0.633

High Recall (0.73): Effective at identifying employees likely to leave.

Moderate Precision (0.38): Reflects class imbalance challenges.

## üîé Key Insights (Odds Ratio)

Factors that INCREASE Attrition Risk:

Overtime = Yes (3.87x higher risk).

Frequent Business Travel (2.39x).

Single Marital Status (1.66x).

Factors that DECREASE Attrition Risk:

Job Satisfaction (0.73x).

High Monthly Income (0.64x).

Age (0.90x).

## üìå Conclusion

Logistic Regression performed best, balancing recall and precision despite imbalanced data.

Oversampling techniques (ROS, SMOTE-Tomek) did not improve results, likely due to loss of critical information.

Variables like overtime, business travel, and marital status are critical predictors, while job satisfaction and income aid retention.

## üöÄ Next Steps

Action Plan
Overtime Analysis:

Investigate root causes (e.g., understaffing, poor organization, lack of training, tech gaps).

Reduce Business Travel:

Assess impact on sales teams.

Salary Benchmarking:

Compare departmental salaries to market rates.

Workplace Climate Initiatives:

Improve employee engagement and satisfaction.

About the Dataset
The dataset used is IBM HR Analytics Employee Attrition & Performance (Kaggle Link). It contains anonymized data from a fictional company, including demographics, job roles, satisfaction levels, and attrition status.

Attrition vs. Turnover
Attrition: Voluntary departures (retirements, resignations) leading to workforce reduction.

Turnover: All departures (voluntary + involuntary), often replaced.

## Technical Setup

Dependencies
Library	Version
Python	3.12.3
Matplotlib	3.9.2
Pandas	2.2.3
Scikit-Learn	1.5.1
Seaborn	0.13.2
Project Structure
‚îú‚îÄ‚îÄ data/               # Raw/processed data  
‚îú‚îÄ‚îÄ models/             # Trained models  
‚îú‚îÄ‚îÄ notebooks/          # Jupyter notebooks  
‚îú‚îÄ‚îÄ src/                # Source code  
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py  
‚îÇ   ‚îú‚îÄ‚îÄ helpers.py      # Utility functions  
‚îÇ   ‚îú‚îÄ‚îÄ config.py       # Project settings  
‚îÇ   ‚îú‚îÄ‚îÄ plots.py        # Visualization scripts  
‚îÇ   ‚îî‚îÄ‚îÄ models.py       # Model training  
‚îú‚îÄ‚îÄ reports/            # Analysis outputs  
‚îÇ   ‚îî‚îÄ‚îÄ images/         # Graphs/figures  
‚îú‚îÄ‚îÄ environment.yml     # Conda environment  
‚îî‚îÄ‚îÄ requirements.txt    # Pip dependencies  
Setup Instructions
Clone the repository:

bash
git clone REPO_URL  
Create a virtual environment:

Conda:

bash
conda env create -f environment.yml  
Pip:

bash
pip install -r requirements.txt  

